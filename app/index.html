<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>Ave IRC Client</title>
        <!-- load MUI -->
		<link href="res/css/mui.min.css" rel="stylesheet" type="text/css" />
		<script src="res/js/mui.min.js"></script>
        <link href="res/css/style.css" rel="stylesheet" />
        <script>
            function updateScroll(){
                var element = document.getElementById("clog");
                element.scrollTop = element.scrollHeight;
            }

            const electron = require("electron");

            electron.ipcRenderer.on("pingchan", function(event, message){
                console.log(message);
                updateScroll();
            });

            electron.ipcRenderer.on("newmsg", function(event, message){
                console.log(message);
                var div = document.createElement("div");
                div.className = "message";
                div.innerHTML = message;
                document.getElementById("clog").appendChild(div);
                updateScroll();
            });
        </script>
    </head>

    <body>
        <div class="flex">
            <div class="chatLog" id="clog">
                <div class="message">
                    <p>hey, scratso!</p>
                    <p class="meta">
                        Person, 18:45 26/09/2016
                        <span class="msgId">#1</span>
                    </p>
                </div>
                <div class="message">
                    <p>hey, person!</p>
                    <p class="meta">
                        Scratso, 18:46 26/09/2016
                        <span class="msgId">#2</span>
                    </p>
                </div>
            </div>
            <div class="usrList">
                <ul>
                    <li class="op">Person</li>
                    <li class="op">Another</li>
                    <li>Scratso</li>
                    <li>Standard</li>
                    <li>User</li>
                    <li>IRCUser</li>
                    <li>Identify</li>
                </ul>
            </div>
        </div>
        <div class="msg">
            <textarea name="msg" id="msg">Type y'er message 'ere!</textarea>
        </div>
    </body>
</html>
